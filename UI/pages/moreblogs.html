<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LogIn</title>
    <link rel="stylesheet" href="../css/moreblogs.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="shortcut icon" type="image/png" href="../images/mylog.png">
</head>
<body>
    <div class="nav">
        <div class="leftnav">
            <label for="" class="logo">BS</label>
        </div>
        <div class="rightnav">
            <ul>
                <li><a class="home" href="../index.html"> Home</a></li>
            </ul>
        </div>
    </div>
    <divclass="container">
        <div id="leftBlogs" class="left-section">

        </div>

        <div id="rightBlogs" class="right-section">

        </div>
    </div>
    <script>
const param = new URLSearchParams(window.location.search);
const blogId = param.get("blogId");

console.log("bog  id",blogId)



const apiUrl =  "https://brand-backend-v2xk.onrender.com/brand/blog/gets";

// Make a GET request using the Fetch API
fetch(apiUrl, {
  method: "GET",

})
  .then(response => {
    if (!response.ok) {
      throw new Error('Network response was not ok');
    }
    return response.json();
  })
  .then(userData => {
    // Process the retrieved user data
    console.log('User Data:', userData.data);
    fillBlogs(userData.data);
  })
  .catch(error => {
    console.error('Error:', error);
  });
console.log("fetch here")
const fillBlogs = (blogs) => {
  blogs.map((blog) => {
    const leftBlog = document.getElementById("leftBlogs");
    leftBlog.innerHTML += `

            <div class="inner">
              <a href="?blogId=${blog._id}"
              <div>
                <img src="${blog.image}" alt="">
                    <h3>${blog.title}</h3>
                    <p>${blog.description}</p>
                </div>
                </a>
            </div>
          
        `;
  });
};


  const apiUrl2 = `https://brand-backend-v2xk.onrender.com/brand/blog/get/${blogId}`;

 fetch(apiUrl2)
    .then((response) => {
      if (!response.ok) {
        throw new Error('Network response was not ok');
      }
      return response.json();
    })
    .then((blogData) =>{ blogData.data
    console.log("response data", blogData.data)
    fillBlog(blogData.data)
    })
    .catch((error) => {
      console.error('Error:', error);
      return null;
    });


    const fillBlog = (thisBlog)=>{
var rightBlogs = document.getElementById("rightBlogs");

rightBlogs.innerHTML = `
            <div class="inner-right">
                <img  src="${thisBlog.image}" alt="">
                <div>
                    <h3>${thisBlog.title}</h3>
                    <p>${thisBlog.description}</p>
                    <div class="comment-div">
                        <div class="likes">
                            <i class="like fas fa-heart"></i>
                            <div id="counter">${thisBlog.likes} Like(s)</div>
                        </div>
                        <div class="bottomcomment">
                            <textarea id="wComment" cols="10" rows="10" placeholder="Write comment"></textarea>
                            <div class="comment-button">
                                <button onclick="handleAddComment()" id="addCom">Add comment</button>
                            </div>
                            <div id="comList" style="color: aliceblue;">
                                <h1 style="color: #ff6300; font-size: 15px; padding-bottom: 1rem;">Comment(s)</h1>
                            </div>
                        </div>
                        <div class="comdiv">
                            <h1 style="font-size:20px;"><i class="user fas fa-user"></i>Sostene</h1>
                            <h4 style="font-size:12px; margin-left: 30px;">Good job</h4>
                        </div>
                    </div>
                </div>
            </div>
`
    }
    </script>
</body>
</html>
